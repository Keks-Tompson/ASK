
@using ASK.BLL.Helper.Setting

@model LoginViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - АСК</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    @*<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">*@
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body  style=" background-color:	#f5f5f5">
    <header >
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm   border-bottom box-shadow mb-3" style=" background-color:#f5f5f5; font-size: 120%;  font-family: Times New Roman" , Times, serif; font-size: 20%;"" >
           

      



            <div class="container-fluid"  style=" margin: 0 10px 0 10px;"  >
                <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">АСК</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse" >
                    @*<partial name="_LoginPartial" /> *@
               
                     

           
                    
                    @if (User.Identity.IsAuthenticated)
                    {


                        <form method="post">
                      

                            @*<a class="btn btn-primary" href="#" role="button">Выйти</a>*@
                            @*<input class="btn btn-primary" type="reset"  value="Выйти">*@
                            
                            <a class="btn btn-warning"  asp-area="" asp-controller="AlarmList" asp-action="Index">Журнал аварий</a>


                            <input class="btn btn-primary" type="submit" asp-area="" asp-controller="Users" asp-action="Logout" value="Выйти">
                           
                            @*<input type="text" onclick="function(lastButton = @{Accaunt.isValid = false;}){}" />*@
                            <button class="btn btn-info" asp-area="" asp-controller="Settings" asp-action="Index"><img src="~/AppData/image/Accaunt/Account.png" width="23" height="23" alt="Вход выполнен"></button>


                        </form>

                    }
                    else
                    {

                        @*<a class="btn btn-primary" asp-area="" asp-controller="Users" asp-action="Index">Войти</a>*@
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                            Войти
                        </button>

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered"  style="width: 1000;">
                                <div class="modal-content">
                                    <div class="text-center"
                                        style=" color: #808080;
                                                font-size: 200%;
                                                ">
                                        <label style="font-family: Times New Roman" , Times, serif; font-size: 20%;" for="start" >Авторизация</label>  @*&nbsp - не разрывной пробел*@
                                    </div>
                                         
                                    <div class="container-fluid" >    
                                        
                                        <div class="col">
                                        </div>

                                        <div class="col"
                                                style=" color: #808080;
                                                        pading: 10px;
                                                        font-size: 130%;
                                                        ">
         
                                            <form method="post" >
                                                <div class="mb-3">
                                                    <div asp-validation-summary="All" style="font-size:23px; font-family:Impact" class="text-danger" ></div>
                                                    <label for="exampleInputEmail1" class="form-label">Пользователь</label>
                                                    <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="UserName">
                                                    
                                                </div>
                                                          
                                                <div class="mb-3">
                                                    <label for="exampleInputPassword1" class="form-label">Пароль</label>
                                                    <input type="password" class="form-control" id="exampleInputPassword1" name="UserPassword">
                                                </div>
                                                          
                                                <div class="text-center">
                                                    
                                                    <input class="btn btn-primary btn-lg" asp-controller="Users" asp-action="Index" style="margin: 0 0 4px 0;" type="submit" value="Войти"/>
                                                </div>
                                                    @*<button class="text-center" type="submit" class="btn btn-primary">Войти</button>*@
                                            </form>
                                           
                                            
                                        </div>

                                        <div class="col">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <a class="btn btn-warning" style="margin: 0 5px 0 0;" asp-area="" asp-controller="AlarmList" asp-action="Index">Журнал аварий</a>
                    }

                    @*<div class="text-center">
                        GlobalStaticSettingsASK.SettingOptions.NameASK
                    </div>*@

                    


                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link text-dark" asp-area="" asp-controller="States" asp-action="Index">Состояние</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark " asp-area="" asp-controller="CurrentValue" asp-action="Index">Значения</a>
                        </li>

                        

                        <li class="nav-item" >
                            <div class="dropdown">
                                <button style="font-size: 96%;  font-family: Times New Roman" , Times, serif; font-size: 20%;" data-toggle="dropdown" class="navbar btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                    Отчёт
                                </button>
                                <div class="dropdown-menu" style="font-size: 90%;  font-family: Times New Roman" , Calibri, serif; font-size: 20%;">
                                    <a class="dropdown-item" asp-area="" asp-controller="ReportDaily" asp-action="Index">Отчёт за сутки</a>
                                    <a class="dropdown-item" asp-area="" asp-controller="ReportMonthly" asp-action="Index">Отчёт за месяц</a>
                                    <a class="dropdown-item" asp-area="" asp-controller="" asp-action="">Отчёт за месяц (средн. выбросы при простое)</a>
                                    <a class="dropdown-item" asp-area="" asp-controller="" asp-action="">Отчёт за месяц (средн. выбросы за сутки)</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" asp-area="" asp-controller="ReportAnnual" asp-action="">За год</a>
                                </div>
                            </div>

                        </li>


                        <li class="nav-item">
                            <div class="dropdown" style="font-size: 90%;  font-family: Times New Roman" , Times, serif; font-size: 20%;>
                                <button style="font-size: 102%;  font-family: Times New Roman"  data-toggle="dropdown" class="navbar btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                    Инструкция
                                </button>
                                <div class="dropdown-menu" >
                                    <a class="dropdown-item" href="~/AppData/Help/СИМАТЕК_Руководство_оператора_СКАДА.pdf"  target="_blank">Для оператора SCAD-ы</a>
                                    <a class="dropdown-item" href="~/AppData/Help/СИМАТЕК_Руководство_оператора_АСК_ВЕБ.pdf" target="_blank">Для пользователя Web-приложения</a>
                                    <a class="dropdown-item" href="~/AppData/Help/СИМАТЕК_Руководство администратора_АСК.pdf"  target="_blank" >Для тех. персонала. Обзор системы</a>
                                    <a class="dropdown-item" href="~/AppData/Help/СИМАТЕК_Порядок установки и настройки АСК.pdf" target="_blank">Для тех. персонала. Инструкция по установке</a>

                                </div>
                            </div>

                        </li>


                        
                        <li class="nav-item" >
                            <div class="dropdown">
                                <button style="font-size: 96%;  font-family: Times New Roman" , Times, serif; font-size: 20%;" data-toggle="dropdown" class="navbar btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                    Доп. (временные)
                                </button>
                                <div class="dropdown-menu" style="font-size: 90%;  font-family: Times New Roman" , Calibri, serif; font-size: 20%;">
                                    <a class="dropdown-item" asp-area="" asp-controller="Current20M" asp-action="CurrentTable20M">Значение тек. 20м.</a>
                                    <a class="dropdown-item" asp-area="" asp-controller="CurrentSensor_4_20" asp-action="CurrentSensor">Значение тек. 4-20мА</a>
                                    @*<a class="dropdown-item" asp-area="" asp-controller="" asp-action="">Отчёт за месяц (средн. выбросы при простое)</a>
                                    <a class="dropdown-item" asp-area="" asp-controller="" asp-action="">Отчёт за месяц (средн. выбросы за сутки)</a>
                                   @* <div class="dropdown-divider"></div>*@
                                    @*<a class="dropdown-item" href="#">За год</a>*@
                                </div>
                            </div>

                        </li>


                        <li class="nav-item">
                            <div id="isConnection" style="margin: 4px 0 0 0">
                                @if (GlobalStaticSettingsASK.globalAlarms.Is_NotConnection.Value)
                                {
                                    <button class="btn btn-danger" type="button">
                                      <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                       &nbspНет связи с ПЛК
                                    </button>
                                }
                            </div> 
                        </li>

                        

                        &nbsp

                        <li class="nav-item">
                            <div id="Write20M_Now" style="margin: 4px 0 0 0">
                                @if (GlobalStaticSettingsASK.stopGetSernsorNow)
                                {
                                    <button class="btn btn-warning">Идёт запись 20М в БД
                                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                    </button>  
                                }
                            </div> 
                        </li>
                        &nbsp
                        <li class="nav-item">
                            <div id="Simulation" style="margin: 4px 0 0 0">
                                @if (GlobalStaticSettingsASK.is_simulation)
                                {
                                    <button class="btn btn-warning">Режим симуляции
                                        @*<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>*@
                                    </button>  
                                }
                            </div> 
                        </li>

                        <li class="nav-item">
                            <div>
                            </div>
                        </li>

                        <li class="nav-item">
                            <div class=""
                                 style="    color: #808080;
                                    margin: 10px 0 0 0;
                                    font-size: 93%;
                                    font-family: Times New Roman" , Times, serif; ">

                                <h8 class="text-center">
                                    @GlobalStaticSettingsASK.SettingOptions.NameASKSystem. 
                                    @GlobalStaticSettingsASK.SettingOptions.NameASK
                                </h8>
                            </div>
                        </li>
                    </ul>

                    
                    
                    

                     











                </div>
            </div>
        </nav>
    </header>
    <div class="container-fluid ">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">


            <div class="container px-4">
                <div class="row gx-5">
                    <div class="col">
                        <a href="http://simatek.by/" class="card-link"> &copy; SIMATEK 2022</a>
                    </div>
                    <div class="col">
                        <div class="text-center">ASK-@GlobalStaticSettingsASK.SettingOptions.NumberASK</div>
                    </div>

                    <div class="col">
                        <div class="text-center">V2.0.01</div>
                    </div>

                </div>
            </div>


   


        </div>
    </footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
    @*@RenderSection("Scripts", required: false)*@



 
    


</body>






</html>




 <script type="text/javascript">
    
        function Update20M() 
        {
            
           
               $.ajax({
                    url: "@Url.Action("Write20M", "Home")",// указываем URL
                    //url: '../HomeController/Write20M',// указываем URL

                    method: "POST",            // HTTP метод, по умолчанию GET
                

                    success: function(result) {
                    
                        if (result[0]) 
                        {
                            $('#Write20M_Now').html(
                                 '<button class="btn btn-warning">Идёт запись 20М в БД' +
                                       ' <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>' + 
                                 '</button>'
                            );
                        }
                        else
                        {
                            $('#Write20M_Now').html('');
                        }

                        if (result[1]) 
                        {
                            $('#isConnection').html(
                                 '<button class="btn btn-danger" type="button">' +
                                    '<span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>' +
                                    '&nbsp Нет связи с ПЛК' +
                                '</button>'
                            );
                        }
                        else
                        {
                            $('#isConnection').html('');
                        }

                        if (result[2]) 
                        {
                            $('#Simulation').html(
                                 '<button class="btn btn-warning">Режим симуляции' +
                                       //' <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>' + 
                                 '</button>'
                            );
                        }
                        else
                        {
                            $('#Simulation').html('');
                        }


             
                    }      
               });
        }

        function Up() {
            alert("Hello! I am an alert box!");
        }


        setInterval(Update20M, 1000)

 </script>







