@using ASK.BLL.Helper.Setting
@using ASK.BLL.Models

@using System.Globalization;                                                                    @*Это всё для подключения*@
@using System.Threading;                                                                        @*типа double*@
@{
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-GB");
}        


<div class="container-fluid" 
        style=" color: #808080;
                padding: 12px;
                /*border-radius: 10px;*/
                /*box-shadow: 0 0 10px;*/
                /*box-shadow: inset 0 0 3px;*/
                /*line-height: 1;*/
                /*margin: 0 -23px 0 0;*/
                /*padding: 10px;*/
                font-size: 120%;
                font-family: Times New Roman , Times, serif;
                /* width: 375px;*/
                /*height 100px;*/
    ">

        <h2 class="text-center" ><label style="font-family: Times New Roman , Times, serif;"  >Настройка расчётов концентраций и выбросов</label></h2>  @*&nbsp - не разрывной пробел*@
                <br />



                <form method="post"> 
                    
                    @if (GlobalStaticSettingsASK.CalculationSetting.Is_Normalization)
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_Normalization" id="Is_Normalization" value="true" checked>
                                <label class="form-check-label" for="Is_Normalization" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                    Приводить концентрации к н.у. после газоанализаторов по температуре и давлению. Если не выбрано - считаем, что концентрации уже приведены к н.у..
                                </label>
                        </div>
                    }
                    else
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_Normalization" id="Is_Normalization" value="true">
                                <label class="form-check-label" for="Is_Normalization" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                    Приводить концентрации к н.у. после газоанализаторов по температуре и давлению. Если не выбрано - считаем, что концентрации уже приведены к н.у..
                                </label>
                        </div>
                    }
                   

                    @if (GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_NotO2" id="Is_NotO2" value="true" checked>
                                <label class="form-check-label" for="Is_NotO2" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                    Кислород (O₂) не участвует в расчётах, коэфициент избытка кислорода считается равным 1, тем самым кислород (O₂) не учитывается в расчётах.
                                </label>
                        </div>
                    }
                    else
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_NotO2" id="Is_NotO2" value="true">
                                <label class="form-check-label" for="Is_NotO2" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                     Кислород (O₂) не участвует в расчётах, коэфициент избытка кислорода считается равным 1, тем самым кислород (O₂) не учитывается в расчётах.
                                </label>
                        </div>
                    }


                    @if (GlobalStaticSettingsASK.CalculationSetting.Is_Alpha_O2Wet)
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_Alpha_O2Wet" id="Is_Alpha_O2Wet" value="true" checked>
                                <label class="form-check-label" for="Is_Alpha_O2Wet" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                    Использовать влажный кислород (O₂ влажный) для расчета избытока кислорода (alpha).
                                </label>
                        </div>
                    }
                    else
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_Alpha_O2Wet" id="Is_Alpha_O2Wet" value="true">
                                <label class="form-check-label" for="Is_Alpha_O2Wet" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                     Использовать влажный кислород (O₂ влажный) для расчета избытока кислорода (alpha).
                                </label>
                        </div>
                    }


                    @if (GlobalStaticSettingsASK.CalculationSetting.Is_NotFlowMeter)
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_NotFlowMeter" id="Is_NotFlowMeter" value="true" checked>
                                <label class="form-check-label" for="Is_NotFlowMeter" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                    Расходомер ДГ отсутсвует, расчёт расхода ДГ происходит расчётным методом по расходомеру топлива (расчёт при сжигании газообразного топлива).
                                </label>
                        </div>
                    }
                    else
                    {
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" typeof="checkbox" name="is_NotFlowMeter" id="Is_NotFlowMeter" value="true">
                                <label class="form-check-label" for="Is_NotFlowMeter" style="font-size: 105%; font-family: Times New Roman , Times, serif;">
                                     Расходомер ДГ отсутсвует, расчёт расхода ДГ происходит расчётным методом по расходомеру топлива (расчёт при сжигании газообразного топлива).
                                </label>
                        </div>
                    }

                    <br/>

                    <table class="table text-center">
                        <tr>
                            <td>
                                <div class="input-group mb-3">
                                    
                                    <label class="input-group-text" for="inputGroupSelect01" style="color: #808080; font-family: Times New Roman , Times, serif; font-size: 85%;">
                                        За H₂O принимае
                                    </label>

                                    <select class="form-select" aria-label="" name="typeH2O"  
                                        style=" color: #808080;
                                            font-size: 85%;
                                            white-space: nowrap; 
                                           
                                            font-family: Times New Roman , Times, serif;
                                        ">
    
                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeH2O == TypeH2OConc.Sensor) 
                                        {
                                            <option selected value = "0">Датчик</option>
                                        }
                                        else
                                        {
                                            <option value = "0">Датчик</option>
                                        }

                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeH2O == TypeH2OConc.Koeff_H20) 
                                        {
                                            <option selected value = "1">Коэффициент</option>
                                        }
                                        else
                                        {
                                            <option value = "1">Коэффициент</option>
                                        }
                          
                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeH2O == TypeH2OConc.O2Wet_O2Dry) 
                                        {
                                            <option selected value = "2">O₂ Вл./O₂ Сух.</option>
                                        }
                                        else
                                        {
                                            <option  value = "2">O₂ Вл./O₂ Сух.</option>
                                        }

                                    </select>
                                    

                                    <label style=" font-family: Times New Roman , Times, serif;">
                                        <div class="input-group">
                     
                                            <span class="input-group-text" id="inputGroup-sizing-default" style=" color: #808080; font-size: 85%;">
                                                Коэф. H₂O
                                            </span>
                                                <input type="number" step="0.01" min="0.01" max="10.00" class="form-control text-end" value="@GlobalStaticSettingsASK.CalculationSetting.Koeff_H2O" name="koeff_H2O" 
                                                style=" color: #808080;
         
                                                        font-size: 85%;
                                                        width: 80px;
                                                    ">
                                        </div>
                                    </label>

                                </div>
                            </td>
                        
                            <td>
                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="inputGroupSelect02" style="color: #808080; font-family: Times New Roman , Times, serif; font-size: 85%;">
                                        Для расчёта NOx используем
                                    </label>
 
                                    <select class="form-select" aria-label="" name="typeNOx"  
                                        style=" color: #808080;
                                            font-size: 85%;
                                            white-space: nowrap; 
                                            font-family: Times New Roman , Times, serif;
                                        ">
    
                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeNOx == TypeNOxConc.OnlyNO) 
                                        {
                                            <option selected value = "0">Датчик NO</option>
                                        }
                                        else
                                        {
                                            <option value = "0">Датчик NO</option>
                                        }

                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeNOx == TypeNOxConc.NO_and_NO2) 
                                        {
                                            <option selected value = "1">Датчик NO + NO<sub>2</sub></option>
                                        }
                                        else
                                        {
                                            <option value = "1">Датчик NO + NO2</option>
                                        }
                          
                                        @if(GlobalStaticSettingsASK.CalculationSetting.TypeNOx == TypeNOxConc.Convertor) 
                                        {
                                            <option selected value = "2">Датчик NO после конвертора</option>
                                        }
                                        else
                                        {
                                            <option value = "2">Датчик NO после конвертора</option>
                                        }
                                    </select>

                                </div>

                                
                            </td>
                        
                            <td>
                                <div class="input-group mb-3" style="color: #808080; font-family: Times New Roman , Times, serif; font-size: 91%;">
                           
                                    <span class="input-group-text" id="inputGroup-sizing-default" style=" color: #808080; font-size: 92%;">
                                        Коэффициент избытка кислорода
                                    </span>
                                        <input type="number" step="0.01" min="0.01" max="10.00" class="form-control text-end" value="@GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization" name="koeff_O2_Normalization" 
                                        style=" color: #808080;
         
                                                font-size: 92%;
                                                width: 70px;
                                            ">

                                    <span class="input-group-text" id="inputGroup-sizing-default" style=" color: #808080; font-size: 92%;">
                                        Диаметр трубы
                                    </span>
                                        <input type="number" step="0.01" min="0.01" max="10.00" class="form-control text-end" value="@GlobalStaticSettingsASK.CalculationSetting.PipeDiameter" name="pipeDiameter" 
                                        style=" color: #808080;
         
                                                font-size: 92%;
                                                width: 70px;
                                            ">

                                </div>
                            </td>

                            <td>
                                <input class="btn btn-primary" style="font-family: Times New Roman , Times, serif; font-size: 82%;" type="submit" asp-action="CalculationSetting" asp-controller="Settings" value="Изменить"/>
                            </td>
                        </tr>
                        

                    </table>

                </form>











                <table class="table text-center" style="table-layout: fixed; color: #808080;" >
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>
                    
                    <tr>
                         <td>
                            <label style="font-size: 140%;">Методика расчётов - концентраций и выбросов</label>
                        </td>

                         <td>
                             <label style="font-size: 140%;">Расчёты онлайн</label>
                        </td>
                    </tr>
                    
                    <tr>
                        <td>
                            @*Методика расчётов - концентраций и выбросов<*@
                            <div id="UpdateCalculation">
                                <div class="text-start">
                                    M<sub>j</sub> – выброс j-го загрязняющего вещества, г/с.
                                </div>   
                               
                                <label>
                                    M<sub>j</sub> = C<sub>j</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                </label>
                            
                                <div class="text-start" style="margin-left: 0px">
                                    C<sub>j</sub> – концентрация j-го загрязняющего вещества в сухих ДГ, мг/м<sub>3</sub>.
                               
                                    <div>
                                        @if(!GlobalStaticSettingsASK.CalculationSetting.Is_Normalization)
                                        {
                                            <div >
                                                <table align="center">
                                                    <tr>
                                                    <td rowspan="2">
                                                        C<sub>j</sub> = C<sub>j</sub><sup>izm</sup> @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <label>&nbsp∙&nbsp</label>
                                                        }
                                                    </td>
                                                
                                                        @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <td style="border-bottom:solid 1px" align="center">
                                                                α
                                                            </td>
                                                        }
                                                    </tr>
                                                    @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                    {
                                                        <tr>            
                                                            <td>
                                                                @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                            </td>
                                                        </tr>
                                                    }
                                                </table>

                                                C<sub>j</sub><sup>izm</sup> – измеренная массовая концентрация j-го загрязняющего вещества при н.у., мг/м<sup>3</sup>.
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="text-center">
                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                               C<sub>j</sub> = C<sub>j</sub><sup>izm</sup> ∙&nbsp
                                                            </td>
                                        
                                                            <td style="border-bottom:solid 1px" align="center">
                                                                (273 + t<sub>g</sub>) ∙ 101.3
                                                            </td>
                                                        </tr>
                                                        <tr>            
                                                            <td>
                                                                273 ∙ P<sub>a</sub>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </label>

                                                @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                {
                                                    <label>
                                                        <table align="center">
                                                            <tr>
                                                                <td rowspan="2">
                                                                    &nbsp∙&nbsp
                                                                </td>
                                        
                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    α
                                                                </td>
                                                            </tr>
                                                            <tr>            
                                                                <td>
                                                                    @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </label>
                                                }
                                            </div>

                                            <div>
                                                C<sub>j</sub><sup>izm</sup> – измеренная массовая концентрация j-го загрязняющего вещества, мг/м<sup>3</sup>.
                                                <br>
                                                P<sub>a</sub> – абсолютное давление ДГ, кПа.
                                                <br />
                                                t<sub>g</sub> – абсолютная температура уходящих ДГ, °C.
                                            </div>
                                        }
                                    </div>



                                    @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                    {
                                        <div>
                                            α – коэффициент избытка воздуха в месте отбора пробы.
                                            <br />
                                
                                            @if(GlobalStaticSettingsASK.CalculationSetting.Is_Alpha_O2Wet && !GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used)
                                            {
                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">

                                                    <h4>ВНИМАНИЕ!</h4>

                                                    Расчёт α, через O<sub>2</sub> влажный невозможен!  
                                                    <br>

                                                    Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков!

                                                </div>

                                                @if (GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                {
                                                    <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                        В системе присутствует датчик O<sub>2</sub> сухой, возможно стоит изменить метод расчета α!
                                                    </div>
                                                }
                                            }

                                            @if(!GlobalStaticSettingsASK.CalculationSetting.Is_Alpha_O2Wet && !GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                {
                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">

                                                    <h4>ВНИМАНИЕ!</h4>

                                                    Расчёт α, через O<sub>2</sub> сухой невозможен!  
                                                    <br>

                                                    Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков!

                                                </div>

                                                @if (GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used)
                                                {
                                                    <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                        В системе присутствует датчик O<sub>2</sub> влажный, возможно стоит изменить метод расчета α!
                                                    </div>
                                                }
                                            }


                                            <table align="center">
                                                <tr>
                                                    <td rowspan="2">
                                                       α =&nbsp
                                                    </td>
                                        
                                                    <td style="border-bottom:solid 1px" align="center">
                                                        21
                                                    </td>
                                                </tr>
                                                <tr>            
                                                    <td>
                                                        21 - O<sub>2</sub> @if(GlobalStaticSettingsASK.CalculationSetting.Is_Alpha_O2Wet) {<label>влажный</label>} else {<label>сухой</label>} 
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    }

                                    V<sub>dry</sub> – объём сухих ДГ, м<sup>3</sup>/c.
                                    <br />
                              
                                    @if(GlobalStaticSettingsASK.SensorRange.Speed.Is_Used && GlobalStaticSettingsASK.CalculationSetting.Is_NotFlowMeter)
                                    {
                                        <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                            В системе присутствует датчик Скорости ДГ (S<sub>ДГ</sub>), возможно стоит изменить метод расчета V<sub>dry</sub>!
                                        </div>
                                    }

                                    @if(GlobalStaticSettingsASK.CalculationSetting.Is_NotFlowMeter)
                                    {
                                        <div>
                                            <p class="text-center">V<sub>dry</sub> = B<sub>s</sub> ∙ V<sub>dry</sub><sup>1.4</sup> </p>

                                            B<sub>s</sub> – расчетный расход топлива, в данном случае:

                                            <table align="center">
                                                <tr>
                                                    <td rowspan="2">
                                                        B<sub>s</sub> = <label style="font-size: 110%;">(</label> 1 -&nbsp
                                                    </td>
                                        
                                                    <td style="border-bottom:solid 1px" align="center">
                                                        q<sub>4</sub>
                                                    </td>

                                                    <td rowspan="2">
                                                        &nbsp<label style="font-size: 110%;">)</label> ∙ B
                                                    </td>
                                                </tr>
                                                <tr>            
                                                    <td align="center">
                                                        100
                                                    </td>
                                                </tr>
                                            </table>

                                            q<sub>4</sub> – потери телпа от механической неполноты сгорания топлива, %. При сжигание газообразного толива принимается q<sub>4</sub>=0, B<sub>s</sub>=B.
                                        
                                            <br>
                                            B – фактический расход топлива на работу котла с расходомера, м<sup>3</sup>/с.
                                        
                                            <br>
                                            V<sub>dry</sub><sup>1.4</sup> – теоретический объем сухих дымовых газов, м<sup>3</sup>/м<sup>3</sup>, приведенных к н.у., в данном случае при сжигание газообразного толива принимается:
                                        
                                            <br>
                                            <p class="text-center">V<sub>dry</sub><sup>1.4</sup> = 12.37 </p>

                                        </div>
                                    }
                                    else
                                    {
                                        @if(!GlobalStaticSettingsASK.SensorRange.Pressure.Is_Used && !GlobalStaticSettingsASK.SensorRange.Temperature.Is_Used)
                                        {
                                            <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>
                                                        Расчёт V<sub>dry</sub> невозможен!
                                                        <br>
                                                        Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!
                                                        <br>
                                                        Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!
                                                    </div>
                                                </div>
                                        }
                                        else
                                        {
                                            @if(!GlobalStaticSettingsASK.SensorRange.Pressure.Is_Used)
                                            {
                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>
                                                        Расчёт V<sub>dry</sub> невозможен!
                                                        <br>
                                                        Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!
                                                    </div>
                                                </div>
                                            }
                                            @if(!GlobalStaticSettingsASK.SensorRange.Temperature.Is_Used)
                                            {
                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>
                                                        Расчёт V<sub>dry</sub> невозможен!
                                                        <br>
                                                        Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!
                                                    </div>
                                                </div>
                                            }
                                        }
                                    

                                        <div>
                                            <table align="center">
                                                <tr>
                                                    <td rowspan="2">
                                                       V<sub>dry</sub> =&nbsp
                                                    </td>
                                        
                                                    <td style="border-bottom:solid 1px" align="center">
                                                        V @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2) {<label>∙ @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization</label>} ∙ k ∙ 273 ∙ (P<sub>b</sub> ± ΔP<sub>i</sub>)
                                                    </td>
                                                </tr>
                                                <tr>            
                                                    <td align="center">
                                                        @if(!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2) {<label>α ∙&nbsp</label>}(273 + t<sub>g</sub>) ∙ 101.3
                                                    </td>
                                                </tr>
                                            </table>

                                
                                             V – объём уходящих ДГ, в даннымо случае:
                                 

                                            <div class="text-center">
                                                @if(!GlobalStaticSettingsASK.SensorRange.Speed.Is_Used)
                                                {
                                                    <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                        <div>
                                                            <h4>ВНИМАНИЕ!</h4>
                                                            Расчёт V невозможен!
                                                            <br>
                                                            Датчик S<sub>дг</sub> отключен, проверьте настройку датчиков!
                                                        </div>
                                                    </div>
                                                }


                                                V = S<sub>дг</sub> ∙ S<sub>поперечного сечения трубы</sub>
                                                <br>
                                                <div class=" text-start">
                                                    S<sub>дг</sub> – скорость ДГ, м/с.
                                                </div>

                                                <table align="center">
                                                    <tr>
                                                        <td rowspan="2">
                                                           S<sub>поперечного сечения трубы</sub> =&nbsp
                                                        </td>
                                        
                                                        <td style="border-bottom:solid 1px" align="center">
                                                           d<sup>2</sup>
                                                        </td>

                                                        <td rowspan="2">
                                                            &nbsp∙ π
                                                        </td>
                                                    </tr>
                                                    <tr>            
                                                        <td align="center">
                                                           4
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                     
                                            <div class="text-start">
                                                k – влажность(H<sub>2</sub>O), отношение объема сухих и влажных продуктов сгорания, в данном случае:

                                                @switch (GlobalStaticSettingsASK.CalculationSetting.TypeH2O)
                                                {
                                                    case TypeH2OConc.Sensor:
                                                        if (!GlobalStaticSettingsASK.SensorRange.H2O.Is_Used)
                                                        {
                                                            <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                <div>
                                                                    <h4>ВНИМАНИЕ!</h4>
                                                                    Расчёт коэффициента k невозможен!
                                                                    <br>
                                                                    Датчик H<sub>2</sub>O отключен, проверьте настройку датчиков или настройку расчёта влажности!
                                                                </div>
                                                            </div>

                                                            @if(GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used && GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                            {
                                                                <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.
                                                                        <br>
                                                                        Так же можно изменить метод расчета k на использование подставноого коэффициента k!
                                                                    </div>
                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!
                                                                    </div>
                                                                </div>
                                                            }
                                                        }
                                                            <div>
                                                                <table align="center">
                                                                    <tr>
                                                                        <td rowspan="2">
                                                                           k = 1 -&nbsp
                                                                        </td>
                                        
                                                                        <td style="border-bottom:solid 1px" align="center">
                                                                            H<sub>2</sub>O
                                                                        </td>
                                                                    </tr>
                                                                    <tr>            
                                                                        <td align="center">
                                                                            100
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                   
                                                    break;

                                                    case TypeH2OConc.Koeff_H20:
                                                        @if (GlobalStaticSettingsASK.SensorRange.H2O.Is_Used)
                                                        {
                                                            <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                <div>
                                                                    В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.
                                                                </div>
                                                            </div>
                                                        }
                                                        @if(GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used && GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                        {
                                                            <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                <div>
                                                                    В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.
                                                                </div>
                                                            </div>
                                                        }
                                                        
                                                        <div class="text-center">
                                                            k = @GlobalStaticSettingsASK.CalculationSetting.Koeff_H2O
                                                        </div>
                                                    break;

                                                    case TypeH2OConc.O2Wet_O2Dry:
                                                        @if(!GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used && !GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                        {
                                                            <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        <h4>ВНИМАНИЕ!</h4>
                                                                        Расчёт коэффициента k невозможен!
                                                                        <br>
                                                                        Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!
                                                                        <br>
                                                                        Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!
                                                                    </div>
                                                            </div>

                                                            <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                <div>
                                                                    Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!
                                                                </div>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            @if(!GlobalStaticSettingsASK.SensorRange.O2Wet.Is_Used)
                                                            {
                                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        <h4>ВНИМАНИЕ!</h4>
                                                                        Расчёт коэффициента k невозможен!
                                                                        <br>
                                                                        Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!
                                                                    </div>
                                                                </div>

                                                                <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!
                                                                    </div>
                                                                </div>
                                                            }

                                                            @if(!GlobalStaticSettingsASK.SensorRange.O2Dry.Is_Used)
                                                            {
                                                                <div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        <h4>ВНИМАНИЕ!</h4>
                                                                        Расчёт коэффициента k невозможен!
                                                                        <br>
                                                                        Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!
                                                                    </div>
                                                                </div>

                                                                <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                    <div>
                                                                        Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!
                                                                    </div>
                                                                </div>
                                                            }
                                                        }
                                                        @if(GlobalStaticSettingsASK.SensorRange.H2O.Is_Used)
                                                        {
                                                            <div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">
                                                                <div>
                                                                    В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.
                                                                </div>
                                                            </div>
                                                        }


                                                        <table align="center">
                                                            <tr>
                                                                <td rowspan="2">
                                                                   k =&nbsp
                                                                </td>
                                        
                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    O<sub>2</sub> влажный
                                                                </td>
                                                            </tr>
                                                            <tr>            
                                                                <td align="center">
                                                                    O<sub>2</sub> сухой
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    break;
                                                }

                                

                                

                                                (P<sub>b</sub> ± ΔP<sub>i</sub>) – в данном случае абсолютное давление ДГ, кПа.
                                                <br />
                                                t<sub>g</sub> – абсолютная температура уходящих ДГ, °C.
                                            </div>
                                        </div>

                                    }
                                 

                                </div>  
                            </div>

                            
                        
                       
                    

                            
                            


                        </td>

                        <td>
                            @*<h4>Расчёты онлайн</h4>*@
                            <div id="UpdateCalculationConc">
                                
                            </div>
                        </td>
                    </tr>
                
                    <tr>
                         <td>
                            <label style="font-size: 140%;">Методика расчётов NOx</label>
                        </td>

                         <td>
                            <label style="font-size: 140%;">Расчёт онлай NOx</label>
                        </td>

                    </tr>

                    <tr>
                        <td>
                            @*<h4>Методика расчётов NOx</h4>*@
                            <div id="culculation_NOx">
                                @switch (GlobalStaticSettingsASK.CalculationSetting.TypeNOx)
                                {
                                    case TypeNOxConc.Convertor:
                                        if (!GlobalStaticSettingsASK.SensorRange.NO.Is_Used)
                                        {
                                            <div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">
                                               
                                                <h4>ВНИМАНИЕ!</h4>

                                                Расчёт NOx невозможен! 
                                                <br>
                                                   
                                                Датчик NO отключен, проверьте настройку датчиков!
                                 
                                            </div>
                                        }
                                            if (GlobalStaticSettingsASK.SensorRange.NO.Is_ppm)
                                            {
                                                <table align="center">
                                                    <tr>
                                                        <td rowspan="2">
                                                            C<sub>NOx</sub> = I<sub>NO</sub> ∙ ρ<sub>NO<sub>2</sub></sub> @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <label>&nbsp∙&nbsp</label>
                                                            }
                                                        </td>

                                                        @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <td style="border-bottom:solid 1px" align="center">
                                                                α
                                                            </td>
                                                        }
                                                    </tr>

                                                    <tr>            
                                                        @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <td align="center">
                                                                @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                            </td>
                                                        }
                                                    </tr>
                                                </table>

                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO после конвертора в ppm.
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                                </div>


                                            }
                                            else
                                            {
                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                                C<sub>NOx</sub> =&nbsp
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                I<sub>NO</sub>
                                                            </td>

                                                            <td rowspan="2">
                                                                &nbsp∙ ρ<sub>NO<sub>2</sub></sub>
                                                            </td>
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                ρ<sub>NO</sub>
                                                            </td> 
                                                        </tr>
                                                    </table>
                                                </label>

                                                @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                {
                                                    <label>
                                                        <table align="center">
                                                            <tr>
                                                                <td rowspan="2" style="vertical-align: central">
                                                                    &nbsp∙&nbsp
                                                                </td>

                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    α
                                                                </td>
                                                            </tr>

                                                            <tr>  
                                                                <td align="center">
                                                                    @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </label>
                                                }


                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO после конвертора в мг/м<sup>3</sup>.
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO – 1.34 при н.у..
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                                </div>
                                            }

                                            <label>
                                                M<sub>NOx</sub> = c<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                            </label>

                                            <br>
                                            <label>
                                                M<sub>NO</sub> = M<sub>NOx</sub> ∙ 0.13 
                                            </label>

                                            <br>
                                            <label>
                                                M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8 
                                            </label>
                                    
                                    break;

                                case TypeNOxConc.OnlyNO:
                                    if (!GlobalStaticSettingsASK.SensorRange.NO.Is_Used)
                                    {
                                        <div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">
                                               
                                            <h4>ВНИМАНИЕ!</h4>

                                            Расчёт NOx невозможен! 
                                            <br>
                                                   
                                            Датчик NO отключен, проверьте настройку датчиков!
                                 
                                        </div>
                                    }

                                        @if(GlobalStaticSettingsASK.SensorRange.NO2.Is_Used && GlobalStaticSettingsASK.SensorRange.NO.Is_Used)
                                        {
                                            <div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">                              
                                                В системе используется датчик NO и NO<sub>2</sub>, возможно стоит использовать вариант расчёта: NO + NO<sub>2</sub> .
                                            </div>
                                        }

                                        if (GlobalStaticSettingsASK.SensorRange.NO.Is_ppm)
                                        {  
                                            <table align="center">
                                                <tr>
                                                    <td rowspan="2">
                                                        C<sub>NOx</sub> = I<sub>NO</sub> ∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub> @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <label>&nbsp∙&nbsp</label>
                                                        }
                                                    </td>

                                                    @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                    {
                                                        <td style="border-bottom:solid 1px" align="center">
                                                            α
                                                        </td>
                                                    }

                                                </tr>

                                                <tr>            
                                                    @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                    {
                                                        <td align="center">
                                                            @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                        </td>
                                                    }
                                                </tr>
                                            </table>

                                            <div class="text-start">
                                                I<sub>NO</sub> – Измеренное NO в ppm.
                                                <br>
                                                ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                            </div>

                                        }
                                        else
                                        {
                                            <label>
                                                <table align="center">
                                                    <tr>
                                                        <td rowspan="2">
                                                            C<sub>NOx</sub> =&nbsp
                                                        </td>

                                                        <td style="border-bottom:solid 1px" align="center">
                                                            I<sub>NO</sub>
                                                        </td>

                                                        <td rowspan="2">
                                                            &nbsp∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub>
                                                        </td>
                                                    </tr>

                                                    <tr>            
                                                        <td align="center">
                                                            ρ<sub>NO</sub>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </label>


                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                            {
                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                                <label>&nbsp∙&nbsp</label>
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                α
                                                            </td>
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                            </td> 
                                                        </tr>
                                                    </table>
                                                </label>
                                            }

                                            <div class="text-start">
                                                I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.
                                                <br>
                                                ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..
                                                <br>
                                                ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                            </div>
                                        }

                                        <label>
                                            M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                        </label>

                                        <br>
                                        <label>
                                            M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                        </label>

                                        <br>
                                        <label>
                                            M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8 
                                        </label>
                                
                                
                                    break;


                                case TypeNOxConc.NO_and_NO2:
                                    if (!GlobalStaticSettingsASK.SensorRange.NO.Is_Used || !GlobalStaticSettingsASK.SensorRange.NO2.Is_Used)
                                    {
                                        <div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>

                                                        Расчёт NOx невозможен! 
                                                        <br>
                                                        @if(!GlobalStaticSettingsASK.SensorRange.NO.Is_Used)
                                                        {
                                                            <div>
                                                            Датчик NO отключен, проверьте настройку датчиков!
                                                            </div>
                                                        }
                                                        @if(!GlobalStaticSettingsASK.SensorRange.NO2.Is_Used)
                                                        {
                                                            <div>
                                                            Датчик NO<sub>2</sub> отключен, проверьте настройку датчиков!
                                                            </div>
                                                        }
                                                    </div>

                                        </div>

                                        @if(GlobalStaticSettingsASK.SensorRange.NO.Is_Used && !GlobalStaticSettingsASK.SensorRange.NO2.Is_Used)
                                        {
                                            <div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">                              
                                                В системе не используется датчик NO<sub>2</sub>, но используетя NO, возможно стоит изменить метод расчёта NOx.
                                            </div>
                                        }
                                    }
                                        if (GlobalStaticSettingsASK.SensorRange.NO.Is_ppm)
                                        {
                                            if (GlobalStaticSettingsASK.SensorRange.NO2.Is_ppm)
                                            {
                                                <table align="center">
                                                    <tr>
                                                        <td rowspan="2">
                                                            C<sub>NOx</sub> = (I<sub>NO</sub> + I<sub>NO<sub>2</sub></sub>) ∙ ρ<sub>NO<sub>2</sub></sub> @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <label>&nbsp∙&nbsp</label>
                                                            }
                                                        </td>

                                                        @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <td style="border-bottom:solid 1px" align="center">
                                                                α
                                                            </td>
                                                        }
                                                    </tr>

                                                    <tr>            
                                                        @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                        {
                                                            <td align="center">
                                                                @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                            </td>
                                                        }
                                                    </tr>
                                                </table>

                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO в ppm.
                                                    <br>
                                                    I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05.
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>
                                                        Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах! 
                                                        <br>
                                                        (NO в ppm, NO<sub>2</sub> в мг/м<sup>3</sup>).

                                                        Если это не является ошибкой, формулы расчётов адаптированы.
                                                    </div>

                                                </div>


                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                                C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbspI<sub>NO</sub> +&nbsp
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                I<sub>NO<sub>2</sub></sub>
                                                            </td>

                                                            <td rowspan="2">
                                                                &nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub> 
                                                            </td>
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                ρ<sub>NO<sub>2</sub></sub>
                                                            </td>  
                                                        </tr>
                                                    </table>
                                                </label>

                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2"  style"padding: 0px">
                                                                @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                                {
                                                                    <label>&nbsp∙&nbsp</label>
                                                                }
                                                            </td>

                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    α
                                                                </td>
                                                            }
                                                        </tr>

                                                        <tr>            
                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td align="center">
                                                                    @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                                </td>
                                                            }   
                                                        </tr>
                                                    </table>
                                                </label>

                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO в ppm.
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Измереннное NO<sub>2</sub> в мг/м<sup>3</sup>.
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                                </div>
                                            }
                                        }
                                        else
                                        {
                                            if (!GlobalStaticSettingsASK.SensorRange.NO2.Is_ppm)
                                            {
                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2" style"padding: 0px">
                                                                C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbsp 
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                I<sub>NO</sub>
                                                            </td>

                                                     
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                ρ<sub>NO</sub>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </label>

                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                                +&nbsp
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                I<sub>NO<sub>2</sub></sub>
                                                            </td>

                                                            <td rowspan="2">
                                                                &nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>
                                                            </td>
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                ρ<sub>NO<sub>2</sub></sub>
                                                            </td>
                                                           
                                                        </tr>
                                                    </table>
                                                </label>

                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2"  style"padding: 0px">
                                                                @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                                {
                                                                    <label>&nbsp∙&nbsp</label>
                                                                }
                                                            </td>

                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    α
                                                                </td>
                                                            }
                                                        </tr>

                                                        <tr>            
                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td align="center">
                                                                    @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                                </td>
                                                            }   
                                                        </tr>
                                                    </table>
                                                </label>

                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.
                                                    <br>
                                                    I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в мг/м<sup>3</sup>.
                                                    <br>
                                                    ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">
                                                    <div>
                                                        <h4>ВНИМАНИЕ!</h4>
                                                        Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах! 
                                                        <br>
                                                        (NO в мг/м<sup>3</sup>, NO<sub>2</sub> в ppm).

                                                        Если это не является ошибкой, формулы расчётов адаптированы.
                                                    </div>

                                                </div>


                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2">
                                                                C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(&nbsp
                                                            </td>

                                                            <td style="border-bottom:solid 1px" align="center">
                                                                I<sub>NO</sub>
                                                            </td>

                                                            <td rowspan="2">
                                                                &nbsp+ I<sub>NO<sub>2</sub></sub>&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>
                                                            </td>
                                                        </tr>

                                                        <tr>            
                                                            <td align="center">
                                                                ρ<sub>NO</sub>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </label>

                                                <label>
                                                    <table align="center">
                                                        <tr>
                                                            <td rowspan="2"  style"padding: 0px">
                                                                @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                                {
                                                                    <label>&nbsp∙&nbsp</label>
                                                                }
                                                            </td>

                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td style="border-bottom:solid 1px" align="center">
                                                                    α
                                                                </td>
                                                            }
                                                        </tr>

                                                        <tr>            
                                                            @if (!GlobalStaticSettingsASK.CalculationSetting.Is_NotO2)
                                                            {
                                                                <td align="center">
                                                                    @GlobalStaticSettingsASK.CalculationSetting.Koeff_O2_Normalization
                                                                </td>
                                                            }   
                                                        </tr>
                                                    </table>
                                                </label>

                                                <div class="text-start">
                                                    I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.
                                                    <br>
                                                    I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.
                                                    <br>
                                                    ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..
                                                    <br>
                                                    ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..
                                                </div>
                                            }
                                        }

                                        <label>
                                            M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                        </label>

                                        <br>
                                        <label>
                                            M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                        </label>

                                        <br>
                                        <label>
                                            M<sub>NO<sub>2</sub></sub> = C<sub>NO<sub>2</sub></sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> 
                                        </label>
                               
                                    break;
                                }
                            </div>

                        </td>

                        <td>
                            <div id="culculation_NOxConc">
                               @*Расчёт онлай NOx*@
                            </div>
                        </td>

                    </tr>

                </table>
                <table id="tableGlobalAlarm">

                </table>
</div>



@section scripts{
  
 <script type="text/javascript">
    
        function Update() 
        {
               $.ajax({
                    url: '@Url.Action("GetCurrentCalculation")',// указываем URL
                    method: "POST",            // HTTP метод, по умолчанию GET
                

                    success: function(result) {
                        //Table(result.sensorNow.temperature_4_20mA , result.sensorNow.temperature_NOx_4_20mA );
                        tableGlobalAlarm(result.calculationSettings, result.sensorRanges);
                        //$('#chart').html('<canvas  id="line" style="  width: 1000px;  height: 130px;"></canvas>');
                        //Graphix();

                        tableGlobalAlarmConc(result.calculationSettings, result.sensorRanges, result.calculation);
                    }      
                });
        }


      
       



  function tableGlobalAlarm(cs, sr) {

    $('#UpdateCalculation').html(
        '<div>' +
            '<div class="text-start">' +
                'M<sub>j</sub> – выброс j-го загрязняющего вещества, г/с.' +
            '</div>' +

            '<label>' +
                'M<sub>j</sub> = C<sub>j</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<div class="text-start" style="margin-left: 0px">' +
                'C<sub>j</sub> – концентрация j-го загрязняющего вещества в сухих ДГ, мг/м<sub>3</sub>.' +

                '<div>'
    )

    if (!cs.is_Normalization) 
    { 
        if (!cs.is_NotO2) 
        {
            $('#UpdateCalculation').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>j</sub> = C<sub>j</sub><sup>izm</sup>&nbsp∙&nbsp' +
                            '</td>' +
                        
                            '<td style="border-bottom:solid 1px" align="center">' +
                                'α' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +            
                            '<td>' +
                                cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>'
            )
        }
        else
        {
            $('#UpdateCalculation').append(
                    '<div>' +
                        'C<sub>j</sub> = C<sub>j</sub><sup>izm</sup>' 
            )
        }

        $('#UpdateCalculation').append(  
                        '<div class="text-start">' +
                            'C<sub>j</sub><sup>izm</sup> – измеренная массовая концентрация j-го загрязняющего вещества при н.у., мг/м<sup>3</sup>.' +
                        '</div>' +
                    '</div>'
        )
    }
    else 
    {
        if (!cs.is_NotO2) 
        {
            $('#UpdateCalculation').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2">' +
                                        'C<sub>j</sub> = C<sub>j</sub><sup>izm</sup> ∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        '(273 + t<sub>g</sub>) ∙ 101.3' +
                                    '</td>' +

                                    '<td rowspan="2">' +
                                        '&nbsp∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        'α' +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +
                                    '<td>' +
                                        '273 ∙ P<sub>a</sub>' +
                                    '</td>' +

                                    '<td>' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>' +
                    '</div>'
            )
        }
        else
        {
            $('#UpdateCalculation').append(
                    '<div class="text-center">' +
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2">' +
                                        'C<sub>j</sub> = C<sub>j</sub><sup>izm</sup> ∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        '(273 + t<sub>g</sub>) ∙ 101.3' +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +            
                                    '<td>' +
                                        '273 ∙ P<sub>a</sub>' +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>' 
            )
        }

        $('#UpdateCalculation').append(
                    '<div class="text-start">' +
                        'C<sub>j</sub><sup>izm</sup> – измеренная массовая концентрация j-го загрязняющего вещества, мг/м<sup>3</sup>.' +
                        '<br>' +
                        'P<sub>a</sub> – абсолютное давление ДГ, кПа.' +
                        '<br />' +
                        't<sub>g</sub> – абсолютная температура уходящих ДГ, °C.' +
                    '</div>'
        )
    }
        
        
    if(!cs.is_NotO2)
    {
        $('#UpdateCalculation').append(
                    '<div class="text-start">' +
                        'α – коэффициент избытка воздуха в месте отбора пробы.' +
                        '<br />'
        )

        if(cs.is_Alpha_O2Wet && !sr.o2Wet.is_Used)                    
        {
            $('#UpdateCalculation').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт α, через O<sub>2</sub> влажный невозможен!' + 
                            '<br>' +
                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков!' +
                        '</div>' 
            )

            if(sr.o2Dry.is_Used)                          
            {
                $('#UpdateCalculation').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик O<sub>2</sub> сухой, возможно стоит изменить метод расчета α!' +
                        '</div>'
                )
            }
        }
                    
        if(!cs.is_Alpha_O2Wet && !sr.o2Dry.is_Used)
        {
            $('#UpdateCalculation').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт α, через O<sub>2</sub> сухой невозможен!' +   
                            '<br>' +
                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков!' +
                        '</div>'
            )

            if(sr.o2Wet.is_Used)   
            {
                $('#UpdateCalculation').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик O<sub>2</sub> влажный, возможно стоит изменить метод расчета α!' +
                        '</div>'
                )
            }
        }

       

        if (!cs.is_Alpha_O2Wet) 
        {
            $('#UpdateCalculation').append(
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'α =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' + 
                                    '21' +
                                '</td>' +
                            '</tr>' +
                         
                            '<tr>' +          
                                '<td>' +
                                    '21 - O<sub>2</sub> сухой' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</div>'
            )
        }
        else 
        {
            $('#UpdateCalculation').append(
                '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'α =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' + 
                                    '21' +
                                '</td>' +
                            '</tr>' +
                         
                            '<tr>' +          
                                '<td>' +
                                    '21 - O<sub>2</sub> влажный' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</div>'              
            )
        }
    }
    
    $('#UpdateCalculation').append(
                    '<div class="text-start">' +
                        'V<sub>dry</sub> – объём сухих ДГ, м<sup>3</sup>/c.' +
                        '<br />' +
                    '</div>'
    )
    
    if(sr.speed.is_Used && cs.is_NotFlowMeter)
    {
        $('#UpdateCalculation').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик Скорости ДГ (S<sub>ДГ</sub>), возможно стоит изменить метод расчета V<sub>dry</sub>!' +
                        '</div>'
        )
    }

    if(cs.is_NotFlowMeter)    
    {
        $('#UpdateCalculation').append(
                    '<div class="text-start">' +
                        '<p class="text-center">V<sub>dry</sub> = B<sub>s</sub> ∙ V<sub>dry</sub><sup>1.4</sup> </p>' +

                        'B<sub>s</sub> – расчетный расход топлива, в данном случае:' +

                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'B<sub>s</sub> = <label style="font-size: 110%;">(</label> 1 -&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'q<sub>4</sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 110%;">)</label> ∙ B' +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +
                                '<td align="center">' +
                                    '100' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +

                        'q<sub>4</sub> – потери телпа от механической неполноты сгорания топлива, %. При сжигание газообразного толива принимается q<sub>4</sub>=0, B<sub>s</sub>=B.' +
                                        
                        '<br>' +
                        'B – фактический расход топлива на работу котла с расходомера, м<sup>3</sup>/с.' +
                                        
                        '<br>' +
                        'V<sub>dry</sub><sup>1.4</sup> – теоретический объем сухих дымовых газов, м<sup>3</sup>/м<sup>3</sup>, приведенных к н.у., в данном случае при сжигание газообразного толива принимается:' +
                                        
                        '<br>' +
                        '<p class="text-center">V<sub>dry</sub><sup>1.4</sup> = 12.37 </p>' +

                    '</div>' 
        )
    }
    else
    {
        if(!sr.pressure.is_Used && !sr.temperature.is_Used)
        {
            $('#UpdateCalculation').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!' +
                            '<br>' +
                            'Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>'
            )
        }
        else
        {
            if(!sr.pressure.is_Used)
            {
                $('#UpdateCalculation').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>'
                )
            }
                             
                               
            if (!sr.temperature.is_Used)
            {
                $('#UpdateCalculation').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' 
                )
            }
        }

        if(!cs.is_NotO2)
        {
            $('#UpdateCalculation').append(
                    '<div>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'V<sub>dry</sub> =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'V ∙ ' + cs.koeff_O2_Normalization + ' ∙ k ∙ 273 ∙ (P<sub>b</sub> ± ΔP<sub>i</sub>)' +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +   
                                '<td align="center">' +
                                    'α ∙ (273 + t<sub>g</sub>) ∙ 101.3' +
                                '</td>' +
                            '</tr>' +
                        '</table>'
            )
        }
        else 
        {
            $('#UpdateCalculation').append(
                    '<div>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'V<sub>dry</sub> =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'V ∙ k ∙ 273 ∙ (P<sub>b</sub> ± ΔP<sub>i</sub>)' +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +   
                                '<td align="center">' +
                                    '(273 + t<sub>g</sub>) ∙ 101.3' +
                                '</td>' +
                            '</tr>' +
                        '</table>'
            )
        }
       
        $('#UpdateCalculation').append(
                        '<div class="text-start">' +
                            'V – объём уходящих ДГ, в даннымо случае:' +
                        '</div>'
        )
                              
        if(!sr.speed.is_Used)                            
        {
            $('#UpdateCalculation').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<div>' +
                                '<h4>ВНИМАНИЕ!</h4>' +
                                'Расчёт V невозможен!' +
                                '<br>' +
                                'Датчик S<sub>дг</sub> отключен, проверьте настройку датчиков!' +
                            '</div>' +
                        '</div>'
            )
        }

        $('#UpdateCalculation').append(
                        'V = S<sub>дг</sub> ∙ S<sub>поперечного сечения трубы</sub>' +
                            '<br>' +
                                '<div class=" text-start">' +
                                    'S<sub>дг</sub> – скорость ДГ, м/с.' +
                                '</div>' +

                                '<table align="center">' +
                                    '<tr>' +
                                        '<td rowspan="2">' +
                                            'S<sub>поперечного сечения трубы</sub> =&nbsp' +
                                        '</td>' +
                                        
                                        '<td style="border-bottom:solid 1px" align="center">' +
                                            'd<sup>2</sup>' +
                                        '</td>' +

                                        '<td rowspan="2">' +
                                            '&nbsp∙ π' +
                                        '</td>' +
                                    '</tr>' +
                                    
                                    '<tr>' +
                                        '<td align="center">' +
                                            '4' +
                                        '</td>' +
                                    '</tr>' +
                                '</table>' +
                                       
                     
                                '<div class="text-start">' +
                                    'k – влажность(H<sub>2</sub>O), отношение объема сухих и влажных продуктов сгорания, в данном случае:'
        )
              
        if (cs.typeH2O == 0)
        {
            if(!sr.h2O.is_Used)
            {
                 $('#UpdateCalculation').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик H<sub>2</sub>O отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>'
                )

                if(sr.o2Wet.is_Used && sr.o2Dry.is_Used)
                {
                    $('#UpdateCalculation').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.' +
                                            '<br>' +
                                            'Так же можно изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
                else
                {
                    $('#UpdateCalculation').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
            }

            $('#UpdateCalculation').append(
                                    '<div>' +
                                        '<table align="center">' +
                                            '<tr>' +
                                                '<td rowspan="2">' +
                                                    'k = 1 -&nbsp' +
                                                '</td>' +
                                        
                                                '<td style="border-bottom:solid 1px" align="center">' +
                                                    'H<sub>2</sub>O' +
                                                '</td>' +
                                            '</tr>' +
                                            
                                            '<tr>' +           
                                                '<td align="center">' +
                                                    '100' +
                                                '</td>' +
                                            '</tr>' +
                                        '</table>' +
                                    '</div>'
            )
        }
        
        if (cs.typeH2O == 1)
        {
            if(sr.h2O.is_Used)                               
            {
                $('#UpdateCalculation').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }

            if(sr.o2Wet.is_Used && sr.o2Dry.is_Used)
            {
                $('#UpdateCalculation').append(
                                   '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }
            
            $('#UpdateCalculation').append(
                                    '<div class="text-center">' +
                                        'k = ' + cs.koeff_H2O +
                                    '</div>'
            )
        }
                              
        if (cs.typeH2O == 2)
        {
            if(!sr.o2Wet.is_Used && !sr.o2Dry.is_Used)              
            {
                $('#UpdateCalculation').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                )
            }
            else
            {
                if(!sr.o2Wet.is_Used)
                {
                    $('#UpdateCalculation').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }

                if(!sr.o2Dry.is_Used)
                {
                    $('#UpdateCalculation').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
            }

            if(sr.h2O.is_Used)
            {
                $('#UpdateCalculation').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }

            $('#UpdateCalculation').append(
                                    '<table align="center">' +
                                        '<tr>' +
                                            '<td rowspan="2">' +
                                                'k =&nbsp' +
                                            '</td>' +
                                        
                                            '<td style="border-bottom:solid 1px" align="center">' +
                                                'O<sub>2</sub> влажный' +
                                            '</td>' +
                                        '</tr>' +
                                        
                                        '<tr>' +      
                                            '<td align="center">' +
                                                'O<sub>2</sub> сухой' +
                                            '</td>' +
                                        '</tr>' +
                                    '</table>'

                                    
            )
        }

        $('#UpdateCalculation').append(
            '<div class="text-start">' +
                '(P<sub>b</sub> ± ΔP<sub>i</sub>) – в данном случае абсолютное давление ДГ, кПа.' +
                    '<br />' +
                    't<sub>g</sub> – абсолютная температура уходящих ДГ, °C.' +
                    '</div>' +
                '</div>' +
           '</div>'
        )
    }
                                
         
    







    //NOx
    $('#UpdateCalculation').append(
                '</div>' +
            '</div>' +
        '</div>'
    )

    $('#culculation_NOx').html(
          '<div class="text-start">'
    )
  
    if(cs.typeNOx == 2)
    {
        if(!sr.no.is_Used) 
        {
            $('#culculation_NOx').append(
            '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +                    
                '<h4>ВНИМАНИЕ!</h4>' +
                'Расчёт NOx невозможен!' + 
                '<br>' +
                'Датчик NO отключен, проверьте настройку датчиков!' +             
            '</div>'
            )
        }

        if(sr.no.is_ppm)
        {
            if (!cs.is_NotO2)
            {
                $('#culculation_NOx').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> = I<sub>NO</sub> ∙ ρ<sub>NO<sub>2</sub></sub> ∙&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'α' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +          
                            '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO после конвертора в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOx').append(
                    '<div class="text-center">' +
                        'C<sub>NOx</sub> = I<sub>NO</sub> ∙ ρ<sub>NO<sub>2</sub></sub>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO после конвертора в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
            $('#culculation_NOx').append(
                '<label>' +
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> =&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'I<sub>NO</sub>' +
                            '</td>' +

                            '<td rowspan="2">' +
                                '&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +
                            '<td align="center">' +
                                'ρ<sub>NO</sub>' +
                            '</td>' +
                        '</tr>' +
                    '</table>' +
                '</label>' 
            )

            if(!cs.is_NotO2)                                             
            {
                $('#culculation_NOx').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2" style="vertical-align: central">' +
                                    '&nbsp∙&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +  
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )
            }

            $('#culculation_NOx').append(
                '<div class="text-start">' +
                    'I<sub>NO</sub> – Измеренное NO после конвертора в мг/м<sup>3</sup>.' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO – 1.34 при н.у..' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                '</div>'
            )
        }

        $('#culculation_NOx').append(
            '<label>' +
                'M<sub>NOx</sub> = c<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> ' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = M<sub>NOx</sub> ∙ 0.13 ' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8' +
            '</label>'
        )
    }

    if(cs.typeNOx == 0)                           
    {
        if(!sr.no.is_Used)
        {
            $('#culculation_NOx').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +                               
                    '<h4>ВНИМАНИЕ!</h4>' +
                    'Расчёт NOx невозможен! ' +
                    '<br>' +
                    'Датчик NO отключен, проверьте настройку датчиков!' +           
                '</div>'
            )
        }

        if(sr.nO2.is_Used && sr.no.is_Used)
        {
            $('#culculation_NOx').append(
                '<div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">' +
                    'В системе используется датчик NO и NO<sub>2</sub>, возможно стоит использовать вариант расчёта: NO + NO<sub>2</sub>.' +
                '</div>'
            )
        }

        if(sr.no.is_ppm)
        {  
            if(!cs.is_NotO2)
            {
                $('#culculation_NOx').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> = I<sub>NO</sub> ∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub> ∙&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +       
                            '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOx').append(
                    'C<sub>NOx</sub> = I<sub>NO</sub> ∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub>' +
                   

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
             $('#culculation_NOx').append(
                '<label>' +
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> =&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'I<sub>NO</sub>' +
                           '</td>' +

                            '<td rowspan="2">' +
                                '&nbsp∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub>' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' + 
                            '<td align="center">' +
                                'ρ<sub>NO</sub>' +
                            '</td>' +
                        '</tr>' +
                    '</table>' +
                '</label>'
            )

            if(!cs.is_NotO2)
            {
                $('#culculation_NOx').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    '<label>&nbsp∙&nbsp</label>' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td> ' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )
            }

            $('#culculation_NOx').append(
                '<div class="text-start">' +
                    'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                    '<br>' +
                    'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                '</div>'
            )
        }

        $('#culculation_NOx').append(
            '<label>' +
                'M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8' +
            '</label>'
        )                       
    }

    if(cs.typeNOx == 1)                           
    {
        if (!sr.no.is_Used && !sr.nO2.is_Used)
        {
             $('#culculation_NOx').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO отключен, проверьте настройку датчиков!' +
                        '</div>'+
                    
                        '<div>' +
                            'Датчик NO<sub>2</sub> отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (!sr.no.is_Used && sr.nO2.is_Used)
        {
            $('#culculation_NOx').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (sr.no.is_Used && !sr.nO2.is_Used)
        {
            $('#culculation_NOx').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO<sub>2</sub> отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (!sr.no.is_Used || !sr.nO2.is_Used)
        {
            if(sr.no.is_Used && !sr.nO2.is_Used)
            {
                $('#culculation_NOx').append(
                    '<div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">' +                  
                        'В системе не используется датчик NO<sub>2</sub>, но используетя NO, возможно стоит изменить метод расчёта NOx.' +  
                    '</div>'
                )
            }
        }

        if(sr.no.is_ppm)
        {
            if(sr.nO2.is_ppm)
            {
                if(!cs.is_NotO2)
                {
                    $('#culculation_NOx').append(
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> = (I<sub>NO</sub> + I<sub>NO<sub>2</sub></sub>) ∙ ρ<sub>NO<sub>2</sub></sub> ∙&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +            
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td>' +
                           '</tr>' +
                        '</table>'  
                    )
                }
                else
                {
                    $('#culculation_NOx').append(
                        'C<sub>NOx</sub> = (I<sub>NO</sub> + I<sub>NO<sub>2</sub></sub>) ∙ ρ<sub>NO<sub>2</sub></sub>'
                    )
                }

                $('#culculation_NOx').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05.' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOx').append(
                    '<div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах!' +
                            '<br>' +
                            '(NO в ppm, NO<sub>2</sub> в мг/м<sup>3</sup>). ' +
                            'Если это не является ошибкой, формулы расчётов адаптированы.' +
                        '</div>' +
                    '</div>' +

                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbspI<sub>NO</sub> +&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO<sub>2</sub></sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    'ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOx').append(
                        '<label>' + 
                            '<table align="center">' + 
                                '<tr>' + 
                                    '<td rowspan="2"  style"padding: 0px">' + 
                                        '<label>&nbsp∙&nbsp</label>' + 
                                    '</td>' + 

                                    '<td style="border-bottom:solid 1px" align="center">' + 
                                        'α' + 
                                    '</td>' + 
                                '</tr>' + 

                                '<tr>' +        
                                    '<td align="center">' +
                                            cs.koeff_O2_Normalization +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOx').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'I<sub>NO</sub> – Измеренное NO<sub>2</sub> в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
            if (!sr.nO2.is_ppm)
            {
                $('#culculation_NOx').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2" style"padding: 0px">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbsp ' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO</sub>' +
                                '</td>' +                 
                            '</tr>' +

                            '<tr>' +
                                '<td align="center">' +
                                    'ρ<sub>NO</sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>' +

                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    '+&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO<sub>2</sub></sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    'ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                                                           
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOx').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2"  style"padding: 0px">' +
                                        '<label>&nbsp∙&nbsp</label>' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        'α' +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +       
                                    '<td align="center">' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                                                             
                                '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOx').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOx').append(
                    '<div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах!' +
                            '<br>' +
                            '(NO в мг/м<sup>3</sup>, NO<sub>2</sub> в ppm). ' +

                            'Если это не является ошибкой, формулы расчётов адаптированы.' +
                        '</div>' +
                    '</div>' +


                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO</sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp+ I<sub>NO<sub>2</sub></sub>&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +          
                                '<td align="center">' +
                                    'ρ<sub>NO</sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOx').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2"  style"padding: 0px">' +
                                        '<label>&nbsp∙&nbsp</label>' +       
                                    '</td>' +
                            
                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        'α' +
                                    '</td>' +  
                                '</tr>' +

                                '<tr>' +   
                                    '<td align="center">' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                               '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOx').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.' +
                        '<br>' +
                        'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }

        $('#culculation_NOx').append(
            '<label>' +
                'M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = C<sub>NO<sub>2</sub></sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>'
        )
                               
    }
  }


  //Онлайн значания
  function tableGlobalAlarmConc(cs, sr, cm) {
    console.log(cs)
    console.log(sr)
    console.log(cm)



    $('#UpdateCalculationConc').html(
        '<div>' +
            '<div class="text-start">' +
               'M<sub>'+ cm.name +'</sub> – выброс загрязняющего вещества, г/с.' +
            '</div>' +

            '<label>' +
                + cm.m +' = ' + cm.c + ' ∙ ' + cm.vdry + ' ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<div class="text-start" style="margin-left: 0px">' +
                'C<sub>'+ cm.name +'</sub> – концентрация загрязняющего вещества в сухих ДГ, мг/м<sub>3</sub>.' +

                '<div>'
    )

    if (!cs.is_Normalization) 
    { 
        if (!cs.is_NotO2) 
        {
            $('#UpdateCalculationConc').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                + cm.c + ' = ' + cm.cizm + '&nbsp∙&nbsp' +
                            '</td>' +
                        
                            '<td style="border-bottom:solid 1px" align="center">' +
                                + cm.a +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +            
                            '<td>' +
                                cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>'
            )
        }
        else
        {
            $('#UpdateCalculationConc').append(
                    '<div>' +
                        + cm.c + ' = ' + cm.cizm 
            )
        }

        $('#UpdateCalculationConc').append(  
                        '<div class="text-start">' +
                            'C<sub>'+ cm.name +'</sub><sup>izm</sup> – измеренная массовая концентрация загрязняющего вещества при н.у., мг/м<sup>3</sup>.' +
                        '</div>' +
                    '</div>'
        )
    }
    else 
    {
        if (!cs.is_NotO2) 
        {
            $('#UpdateCalculationConc').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2">' +
                                        + cm.c + ' = ' + cm.cizm + ' ∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        '(273 + ' + cm.tg + ') ∙ 101.3' +
                                    '</td>' +

                                    '<td rowspan="2">' +
                                        '&nbsp∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        + cm.a +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +
                                    '<td>' +
                                        '273 ∙ ' + cm.pa +
                                    '</td>' +

                                    '<td>' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>' +
                    '</div>'
            )
        }
        else
        {
            $('#UpdateCalculationConc').append(
                    '<div class="text-center">' +
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2">' +
                                        + cm.c + ' = ' + cm.cizm + ' ∙&nbsp' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        '(273 + ' + cm.tg + ') ∙ 101.3' +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +            
                                    '<td>' +
                                        '273 ∙ ' + cm.pa +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>' 
            )
        }

        $('#UpdateCalculationConc').append(
                    '<div class="text-start">' +
                        'C<sub>'+ cm.name +'</sub><sup>izm</sup> – измеренная массовая концентрация загрязняющего вещества, мг/м<sup>3</sup>.' +
                        '<br>' +
                        'P<sub>a</sub> – абсолютное давление ДГ, кПа.' +
                        '<br />' +
                        't<sub>g</sub> – абсолютная температура уходящих ДГ, °C.' +
                    '</div>'
        )
    }
        
        
    if(!cs.is_NotO2)
    {
        $('#UpdateCalculationConc').append(
                    '<div class="text-start">' +
                        'α – коэффициент избытка воздуха в месте отбора пробы.' +
                        '<br />'
        )

        if(cs.is_Alpha_O2Wet && !sr.o2Wet.is_Used)                    
        {
            $('#UpdateCalculationConc').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт α, через O<sub>2</sub> влажный невозможен!' + 
                            '<br>' +
                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков!' +
                        '</div>' 
            )

            if(sr.o2Dry.is_Used)                          
            {
                $('#UpdateCalculationConc').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик O<sub>2</sub> сухой, возможно стоит изменить метод расчета α!' +
                        '</div>'
                )
            }
        }
                    
        if(!cs.is_Alpha_O2Wet && !sr.o2Dry.is_Used)
        {
            $('#UpdateCalculationConc').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт α, через O<sub>2</sub> сухой невозможен!' +   
                            '<br>' +
                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков!' +
                        '</div>'
            )

            if(sr.o2Wet.is_Used)   
            {
                $('#UpdateCalculationConc').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик O<sub>2</sub> влажный, возможно стоит изменить метод расчета α!' +
                        '</div>'
                )
            }
        }

       

        if (!cs.is_Alpha_O2Wet) 
        {
            $('#UpdateCalculationConc').append(
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    + cm.a + ' =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' + 
                                    '21' +
                                '</td>' +
                            '</tr>' +
                         
                            '<tr>' +          
                                '<td>' +
                                    '21 - ' + cm.a_O2 + 
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</div>'
            )
        }
        else 
        {
            $('#UpdateCalculationConc').append(
                '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    + cm.a + ' =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' + 
                                    '21' +
                                '</td>' +
                            '</tr>' +
                         
                            '<tr>' +          
                                '<td>' +
                                    '21 - ' + cm.a_O2 +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</div>'              
            )
        }
    }
    
    $('#UpdateCalculationConc').append(
                    '<div class="text-start">' +
                        'V<sub>dry</sub> – объём сухих ДГ, м<sup>3</sup>/c.' +
                        '<br />' +
                    '</div>'
    )
    
    if(sr.speed.is_Used && cs.is_NotFlowMeter)
    {
        $('#UpdateCalculationConc').append(
                        '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            'В системе присутствует датчик Скорости ДГ (S<sub>ДГ</sub>), возможно стоит изменить метод расчета V<sub>dry</sub>!' +
                        '</div>'
        )
    }

    if(cs.is_NotFlowMeter)    
    {
        $('#UpdateCalculationConc').append(
                    '<div class="text-start">' +
                        '<p class="text-center">' + cm.vdry + ' = ' + cm.b + ' ∙ ' + cm.vdry1_4 + '</p>' +

                        'B<sub>s</sub> – расчетный расход топлива, в данном случае:' +

                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    + cm.bs + ' = <label style="font-size: 110%;">(</label> 1 -&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    + cm.q4 +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 110%;">)</label> ∙ ' + cm.b +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +
                                '<td align="center">' +
                                    '100' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +

                        'q<sub>4</sub> – потери телпа от механической неполноты сгорания топлива, %. При сжигание газообразного толива принимается q<sub>4</sub>=0, B<sub>s</sub>=B.' +
                                        
                        '<br>' +
                        'B – фактический расход топлива на работу котла с расходомера, м<sup>3</sup>/с.' +
                                        
                        '<br>' +
                        'V<sub>dry</sub><sup>1.4</sup> – теоретический объем сухих дымовых газов, м<sup>3</sup>/м<sup>3</sup>, приведенных к н.у., в данном случае при сжигание газообразного толива принимается:' +
                                        
                        '<br>' +
                        '<p class="text-center">V<sub>dry</sub><sup>1.4</sup> = 12.37 </p>' +

                    '</div>' 
        )
    }
    else
    {
        if(!sr.pressure.is_Used && !sr.temperature.is_Used)
        {
            $('#UpdateCalculationConc').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!' +
                            '<br>' +
                            'Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>'
            )
        }
        else
        {
            if(!sr.pressure.is_Used)
            {
                $('#UpdateCalculationConc').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютного давления ДГ (P<sub>b</sub> ± ΔP<sub>i</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>'
                )
            }
                             
                               
            if (!sr.temperature.is_Used)
            {
                $('#UpdateCalculationConc').append(
                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Расчёт V<sub>dry</sub> невозможен!' +
                            '<br>' +
                            'Датчик абсолютной температуры ДГ (t<sub>g</sub>) отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' 
                )
            }
        }

        if(!cs.is_NotO2)
        {
            $('#UpdateCalculationConc').append(
                    '<div>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    + cm.vdry + ' =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    + cm.v + ' ∙ ' + cs.koeff_O2_Normalization + ' ∙ ' + cm.k + ' ∙ 273 ∙ ' + cm.pb_Pi +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +   
                                '<td align="center">' +
                                    + cm.a + ' ∙ (273 + ' + cm.tg + ') ∙ 101.3' +
                                '</td>' +
                            '</tr>' +
                        '</table>'
            )
        }
        else 
        {
            $('#UpdateCalculationConc').append(
                    '<div>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    + cm.vdry + ' =&nbsp' +
                                '</td>' +
                                        
                                '<td style="border-bottom:solid 1px" align="center">' +
                                    + cm.v + ' ∙ ' + cm.k + ' ∙ 273 ∙ ' + cm.pb_Pi +
                                '</td>' +
                            '</tr>' +
                            
                            '<tr>' +   
                                '<td align="center">' +
                                    '(273 + ' + cm.tg + ') ∙ 101.3' +
                                '</td>' +
                            '</tr>' +
                        '</table>'
            )
        }
       
        $('#UpdateCalculationConc').append(
                        '<div class="text-start">' +
                            'V – объём уходящих ДГ, в даннымо случае:' +
                        '</div>'
        )
                              
        if(!sr.speed.is_Used)                            
        {
            $('#UpdateCalculationConc').append(
                        '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                            '<div>' +
                                '<h4>ВНИМАНИЕ!</h4>' +
                                'Расчёт V невозможен!' +
                                '<br>' +
                                'Датчик S<sub>дг</sub> отключен, проверьте настройку датчиков!' +
                            '</div>' +
                        '</div>'
            )
        }

        $('#UpdateCalculationConc').append(
                        + cm.v + ' = ' + cm.sfg + ' ∙ ' + cm.s_section +
                            '<br>' +
                                '<div class=" text-start">' +
                                    'S<sub>дг</sub> – скорость ДГ, м/с.' +
                                '</div>' +

                                '<table align="center">' +
                                    '<tr>' +
                                        '<td rowspan="2">' +
                                            + cm.s_section + ' =&nbsp' +
                                        '</td>' +
                                        
                                        '<td style="border-bottom:solid 1px" align="center">' +
                                            + cm.d + '<sup>2</sup>' +
                                        '</td>' +

                                        '<td rowspan="2">' +
                                            '&nbsp∙ ' + cm.pi +
                                        '</td>' +
                                    '</tr>' +
                                    
                                    '<tr>' +
                                        '<td align="center">' +
                                            '4' +
                                        '</td>' +
                                    '</tr>' +
                                '</table>' +
                                       
                     
                                '<div class="text-start">' +
                                    'k – влажность(H<sub>2</sub>O), отношение объема сухих и влажных продуктов сгорания, в данном случае:'
        )
              
        if (cs.typeH2O == 0)
        {
            if(!sr.h2O.is_Used)
            {
                 $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик H<sub>2</sub>O отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>'
                )

                if(sr.o2Wet.is_Used && sr.o2Dry.is_Used)
                {
                    $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.' +
                                            '<br>' +
                                            'Так же можно изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
                else
                {
                    $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
            }

            $('#UpdateCalculationConc').append(
                                    '<div>' +
                                        '<table align="center">' +
                                            '<tr>' +
                                                '<td rowspan="2">' +
                                                    + cm.k +'= 1 -&nbsp' +
                                                '</td>' +
                                        
                                                '<td style="border-bottom:solid 1px" align="center">' +
                                                    + cm.h2O +
                                                '</td>' +
                                            '</tr>' +
                                            
                                            '<tr>' +           
                                                '<td align="center">' +
                                                    '100' +
                                                '</td>' +
                                            '</tr>' +
                                        '</table>' +
                                    '</div>'
            )
        }
        
        if (cs.typeH2O == 1)
        {
            if(sr.h2O.is_Used)                               
            {
                $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }

            if(sr.o2Wet.is_Used && sr.o2Dry.is_Used)
            {
                $('#UpdateCalculationConc').append(
                                   '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики O<sub>2</sub> влажный и O<sub>2</sub> сухой, возможно стоит изменить метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }
            
            $('#UpdateCalculationConc').append(
                                    '<div class="text-center">' +
                                        + cm.k + ' = ' + cs.koeff_H2O +
                                    '</div>'
            )
        }
                              
        if (cs.typeH2O == 2)
        {
            if(!sr.o2Wet.is_Used && !sr.o2Dry.is_Used)              
            {
                $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                )
            }
            else
            {
                if(!sr.o2Wet.is_Used)
                {
                    $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> влажный отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }

                if(!sr.o2Dry.is_Used)
                {
                    $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-danger text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            '<h4>ВНИМАНИЕ!</h4>' +
                                            'Расчёт коэффициента k невозможен!' +
                                            '<br>' +
                                            'Датчик O<sub>2</sub> сухой отключен, проверьте настройку датчиков или настройку расчёта влажности!' +
                                        '</div>' +
                                    '</div>' +

                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'Возможно стоит изменить метод расчета k на использование подставноого коэффициента k!' +
                                        '</div>' +
                                    '</div>'
                    )
                }
            }

            if(sr.h2O.is_Used)
            {
                $('#UpdateCalculationConc').append(
                                    '<div class="alert alert-info text-center" role="alert" style="font-size: 97%; padding: 2px;">' +
                                        '<div>' +
                                            'В системе присутсвуют датчики H<sub>2</sub>O, возможно стоит выбрать его для метод расчета k.' +
                                        '</div>' +
                                    '</div>'
                )
            }

            $('#UpdateCalculationConc').append(
                                    '<table align="center">' +
                                        '<tr>' +
                                            '<td rowspan="2">' +
                                                + cm.k + ' =&nbsp' +
                                            '</td>' +
                                        
                                            '<td style="border-bottom:solid 1px" align="center">' +
                                                + cm.o2_Wet +
                                            '</td>' +
                                        '</tr>' +
                                        
                                        '<tr>' +      
                                            '<td align="center">' +
                                                + cm.o2_Dry +
                                            '</td>' +
                                        '</tr>' +
                                    '</table>'

                                    
            )
        }

        $('#UpdateCalculationConc').append(
            '<div class="text-start">' +
                '(P<sub>b</sub> ± ΔP<sub>i</sub>) – в данном случае абсолютное давление ДГ, кПа.' +
                    '<br />' +
                    't<sub>g</sub> – абсолютная температура уходящих ДГ, °C.' +
                    '</div>' +
                '</div>' +
           '</div>'
        )
    }
                                
         
    







    //NOx
    $('#UpdateCalculationConc').append(
                '</div>' +
            '</div>' +
        '</div>'
    )

    $('#culculation_NOxConc').html(
          '<div class="text-start">'
    )
  
    if(cs.typeNOx == 2)
    {
        if(!sr.no.is_Used) 
        {
            $('#culculation_NOxConc').append(
            '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +                    
                '<h4>ВНИМАНИЕ!</h4>' +
                'Расчёт NOx невозможен!' + 
                '<br>' +
                'Датчик NO отключен, проверьте настройку датчиков!' +             
            '</div>'
            )
        }

        if(sr.no.is_ppm)
        {
            if (!cs.is_NotO2)
            {
                $('#culculation_NOxConc').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> = ' + cm.i_NO + ' ∙ ' + cm.rNO2 + ' ∙&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'α' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +          
                            '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO после конвертора в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOxConc').append(
                    '<div class="text-center">' +
                        'C<sub>NOx</sub> = I<sub>NO</sub> ∙ ρ<sub>NO<sub>2</sub></sub>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO после конвертора в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
            $('#culculation_NOxConc').append(
                '<label>' +
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> =&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'I<sub>NO</sub>' +
                            '</td>' +

                            '<td rowspan="2">' +
                                '&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +
                            '<td align="center">' +
                                'ρ<sub>NO</sub>' +
                            '</td>' +
                        '</tr>' +
                    '</table>' +
                '</label>' 
            )

            if(!cs.is_NotO2)                                             
            {
                $('#culculation_NOxConc').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2" style="vertical-align: central">' +
                                    '&nbsp∙&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +  
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )
            }

            $('#culculation_NOxConc').append(
                '<div class="text-start">' +
                    'I<sub>NO</sub> – Измеренное NO после конвертора в мг/м<sup>3</sup>.' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO – 1.34 при н.у..' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                '</div>'
            )
        }

        $('#culculation_NOxConc').append(
            '<label>' +
                'M<sub>NOx</sub> = c<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup> ' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = M<sub>NOx</sub> ∙ 0.13 ' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8' +
            '</label>'
        )
    }

    if(cs.typeNOx == 0)                           
    {
        if(!sr.no.is_Used)
        {
            $('#culculation_NOxConc').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +                               
                    '<h4>ВНИМАНИЕ!</h4>' +
                    'Расчёт NOx невозможен! ' +
                    '<br>' +
                    'Датчик NO отключен, проверьте настройку датчиков!' +           
                '</div>'
            )
        }

        if(sr.nO2.is_Used && sr.no.is_Used)
        {
            $('#culculation_NOxConc').append(
                '<div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">' +
                    'В системе используется датчик NO и NO<sub>2</sub>, возможно стоит использовать вариант расчёта: NO + NO<sub>2</sub>.' +
                '</div>'
            )
        }

        if(sr.no.is_ppm)
        {  
            if(!cs.is_NotO2)
            {
                $('#culculation_NOxConc').append(
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> = I<sub>NO</sub> ∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub> ∙&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' +       
                            '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                            '</td>' +
                        '</tr>' +
                    '</table>' +

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOxConc').append(
                    'C<sub>NOx</sub> = I<sub>NO</sub> ∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub>' +
                   

                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
             $('#culculation_NOxConc').append(
                '<label>' +
                    '<table align="center">' +
                        '<tr>' +
                            '<td rowspan="2">' +
                                'C<sub>NOx</sub> =&nbsp' +
                            '</td>' +

                            '<td style="border-bottom:solid 1px" align="center">' +
                                'I<sub>NO</sub>' +
                           '</td>' +

                            '<td rowspan="2">' +
                                '&nbsp∙ 1.05 ∙ ρ<sub>NO<sub>2</sub></sub>' +
                            '</td>' +
                        '</tr>' +

                        '<tr>' + 
                            '<td align="center">' +
                                'ρ<sub>NO</sub>' +
                            '</td>' +
                        '</tr>' +
                    '</table>' +
                '</label>'
            )

            if(!cs.is_NotO2)
            {
                $('#culculation_NOxConc').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    '<label>&nbsp∙&nbsp</label>' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td> ' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )
            }

            $('#culculation_NOxConc').append(
                '<div class="text-start">' +
                    'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                    '<br>' +
                    'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                    '<br>' +
                    'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                '</div>'
            )
        }

        $('#culculation_NOxConc').append(
            '<label>' +
                'M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = M<sub>NOx</sub> ∙ 0.8' +
            '</label>'
        )                       
    }

    if(cs.typeNOx == 1)                           
    {
        if (!sr.no.is_Used && !sr.nO2.is_Used)
        {
             $('#culculation_NOxConc').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO отключен, проверьте настройку датчиков!' +
                        '</div>'+
                    
                        '<div>' +
                            'Датчик NO<sub>2</sub> отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (!sr.no.is_Used && sr.nO2.is_Used)
        {
            $('#culculation_NOxConc').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (sr.no.is_Used && !sr.nO2.is_Used)
        {
            $('#culculation_NOxConc').append(
                '<div class="alert alert-danger" role="alert" style="font-size: 97%; padding: 2px;">' +
                    '<div>' +
                        '<h4>ВНИМАНИЕ!</h4>' +
                        'Расчёт NOx невозможен!' +
                        '<br>' +
                        
                        '<div>' +
                            'Датчик NO<sub>2</sub> отключен, проверьте настройку датчиков!' +
                        '</div>' +
                    '</div>' +
                '</div>'
            )
        }

        if (!sr.no.is_Used || !sr.nO2.is_Used)
        {
            if(sr.no.is_Used && !sr.nO2.is_Used)
            {
                $('#culculation_NOxConc').append(
                    '<div class="alert alert-info" role="alert" style="font-size: 90%; padding: 2px;">' +                  
                        'В системе не используется датчик NO<sub>2</sub>, но используетя NO, возможно стоит изменить метод расчёта NOx.' +  
                    '</div>'
                )
            }
        }

        if(sr.no.is_ppm)
        {
            if(sr.nO2.is_ppm)
            {
                if(!cs.is_NotO2)
                {
                    $('#culculation_NOxConc').append(
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> = (I<sub>NO</sub> + I<sub>NO<sub>2</sub></sub>) ∙ ρ<sub>NO<sub>2</sub></sub> ∙&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'α' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +            
                                '<td align="center">' +
                                    cs.koeff_O2_Normalization +
                                '</td>' +
                           '</tr>' +
                        '</table>'  
                    )
                }
                else
                {
                    $('#culculation_NOxConc').append(
                        'C<sub>NOx</sub> = (I<sub>NO</sub> + I<sub>NO<sub>2</sub></sub>) ∙ ρ<sub>NO<sub>2</sub></sub>'
                    )
                }

                $('#culculation_NOxConc').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05.' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOxConc').append(
                    '<div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах!' +
                            '<br>' +
                            '(NO в ppm, NO<sub>2</sub> в мг/м<sup>3</sup>). ' +
                            'Если это не является ошибкой, формулы расчётов адаптированы.' +
                        '</div>' +
                    '</div>' +

                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbspI<sub>NO</sub> +&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO<sub>2</sub></sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    'ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOxConc').append(
                        '<label>' + 
                            '<table align="center">' + 
                                '<tr>' + 
                                    '<td rowspan="2"  style"padding: 0px">' + 
                                        '<label>&nbsp∙&nbsp</label>' + 
                                    '</td>' + 

                                    '<td style="border-bottom:solid 1px" align="center">' + 
                                        'α' + 
                                    '</td>' + 
                                '</tr>' + 

                                '<tr>' +        
                                    '<td align="center">' +
                                            cs.koeff_O2_Normalization +
                                    '</td>' +
                                '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOxConc').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в ppm.' +
                        '<br>' +
                        'I<sub>NO</sub> – Измеренное NO<sub>2</sub> в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }
        else
        {
            if (!sr.nO2.is_ppm)
            {
                $('#culculation_NOxConc').append(
                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2" style"padding: 0px">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(</label>&nbsp ' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO</sub>' +
                                '</td>' +                 
                            '</tr>' +

                            '<tr>' +
                                '<td align="center">' +
                                    'ρ<sub>NO</sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>' +

                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    '+&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO<sub>2</sub></sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +   
                                '<td align="center">' +
                                    'ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                                                           
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOxConc').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2"  style"padding: 0px">' +
                                        '<label>&nbsp∙&nbsp</label>' +
                                    '</td>' +

                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        'α' +
                                    '</td>' +
                                '</tr>' +

                                '<tr>' +       
                                    '<td align="center">' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                                                             
                                '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOxConc').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
            else
            {
                $('#culculation_NOxConc').append(
                    '<div class="alert alert-warning" role="alert" style="font-size: 97%; padding: 2px;">' +
                        '<div>' +
                            '<h4>ВНИМАНИЕ!</h4>' +
                            'Возможна ошибка настроек датчиков. NO и NO<sub>2</sub> измеряются в разных величинах!' +
                            '<br>' +
                            '(NO в мг/м<sup>3</sup>, NO<sub>2</sub> в ppm). ' +

                            'Если это не является ошибкой, формулы расчётов адаптированы.' +
                        '</div>' +
                    '</div>' +


                    '<label>' +
                        '<table align="center">' +
                            '<tr>' +
                                '<td rowspan="2">' +
                                    'C<sub>NOx</sub> =&nbsp<label style="font-size: 150%;">(&nbsp' +
                                '</td>' +

                                '<td style="border-bottom:solid 1px" align="center">' +
                                    'I<sub>NO</sub>' +
                                '</td>' +

                                '<td rowspan="2">' +
                                    '&nbsp+ I<sub>NO<sub>2</sub></sub>&nbsp<label style="font-size: 150%;">)</label>&nbsp∙ ρ<sub>NO<sub>2</sub></sub>' +
                                '</td>' +
                            '</tr>' +

                            '<tr>' +          
                                '<td align="center">' +
                                    'ρ<sub>NO</sub>' +
                                '</td>' +
                            '</tr>' +
                        '</table>' +
                    '</label>'
                )

                if(!cs.is_NotO2)
                {
                    $('#culculation_NOxConc').append(
                        '<label>' +
                            '<table align="center">' +
                                '<tr>' +
                                    '<td rowspan="2"  style"padding: 0px">' +
                                        '<label>&nbsp∙&nbsp</label>' +       
                                    '</td>' +
                            
                                    '<td style="border-bottom:solid 1px" align="center">' +
                                        'α' +
                                    '</td>' +  
                                '</tr>' +

                                '<tr>' +   
                                    '<td align="center">' +
                                        cs.koeff_O2_Normalization +
                                    '</td>' +
                               '</tr>' +
                            '</table>' +
                        '</label>'
                    )
                }

                $('#culculation_NOxConc').append(
                    '<div class="text-start">' +
                        'I<sub>NO</sub> – Измеренное NO в мг/м<sup>3</sup>.' +
                        '<br>' +
                        'I<sub>NO<sub>2</sub></sub> – Измеренное NO<sub>2</sub> в ppm.' +
                        '<br>' +
                        'ρ<sub>NO</sub> – Плотность NO – 1.34 при н.у..' +
                        '<br>' +
                        'ρ<sub>NO<sub>2</sub></sub> – Плотность NO<sub>2</sub> – 2.05 при н.у..' +
                    '</div>'
                )
            }
        }

        $('#culculation_NOxConc').append(
            '<label>' +
                'M<sub>NOx</sub> = C<sub>NOx</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO</sub> = C<sub>NO</sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>' +

            '<br>' +
            '<label>' +
                'M<sub>NO<sub>2</sub></sub> = C<sub>NO<sub>2</sub></sub> ∙ V<sub>dry</sub> ∙ 10<sup>-3</sup>' +
            '</label>'
        )
                               
    }
  }

    
        setInterval(Update, 1000)
</script>
}

        